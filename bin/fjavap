#!/bin/bash

################################################################################
#    Copyright 2009 Sun Microsystems, Inc.,
#    4150 Network Circle, Santa Clara, California 95054, U.S.A.
#    All rights reserved.
#
#    U.S. Government Rights - Commercial software.
#    Government users are subject to the Sun Microsystems, Inc. standard
#    license agreement and applicable provisions of the FAR and its supplements.
#
#    Use is subject to license terms.
#
#    This distribution may include materials developed by third parties.
#
#    Sun, Sun Microsystems, the Sun logo and Java are trademarks or registered
#    trademarks of Sun Microsystems, Inc. in the U.S. and other countries.
################################################################################

# Minor special-case acceleration here.
if [ -z "$FORTRESS_HOME" ]; then
   export FORTRESS_HOME="`${0%fjavap}fortress_home`"
fi

if (uname | egrep CYGWIN > /dev/null) ; then
  SEP=";"
else
  SEP=":"
fi

CACHES="$FORTRESS_HOME/default_repository/caches"
THIRD_PARTY="$FORTRESS_HOME/ProjectFortress/third_party"
TP="$FORTRESS_HOME/ProjectFortress/third_party"
SV=2.8.0.r21209

CP="$CACHES/bytecode_cache${SEP}$CACHES/bytecode_cache/*${SEP}$CACHES/nativewrapper_cache${SEP}$CACHES/environment_cache${SEP}$FORTRESS_HOME/ProjectFortress/build${SEP}$THIRD_PARTY/junit/junit.jar${SEP}$THIRD_PARTY/asm/asm-all-3.1.jar${SEP}$THIRD_PARTY/xtc/xtc.jar${SEP}$THIRD_PARTY/jsr166y/jsr166y.jar${SEP}$THIRD_PARTY/plt/plt.jar${SEP}$JAVA_HOME/lib/tools.jar${SEP}$THIRD_PARTY/unsigned/unsigned.jar${SEP}$THIRD_PARTY/astgen/astgen.jar${SEP}$THIRD_PARTY/scala/scala-compiler-${SV}.jar${SEP}$THIRD_PARTY/scala/scala-library-${SV}.jar${SEP}$CP"

if [ -z "$JAVA_HOME" ] ; then
  JAVACMD=java
else
  JAVACMD="$JAVA_HOME/bin/java"
fi

if [ -z "$JAVA_FLAGS" ] ; then
  JAVA_FLAGS=-Xmx768m
fi

# echo "$JAVACMD" $JAVA_FLAGS "-Xbootclasspath/p:$CP" "$@"

javap -J-Dfile.encoding=UTF-8 -bootclasspath "$CP" -classpath "$CP" "$@"
