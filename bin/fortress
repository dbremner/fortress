#!/bin/bash

################################################################################
#    Copyright 2010 Sun Microsystems, Inc.,
#    4150 Network Circle, Santa Clara, California 95054, U.S.A.
#    All rights reserved.
#
#    U.S. Government Rights - Commercial software.
#    Government users are subject to the Sun Microsystems, Inc. standard
#    license agreement and applicable provisions of the FAR and its supplements.
#
#    Use is subject to license terms.
#
#    This distribution may include materials developed by third parties.
#
#    Sun, Sun Microsystems, the Sun logo and Java are trademarks or registered
#    trademarks of Sun Microsystems, Inc. in the U.S. and other countries.
################################################################################

export FORTRESS_HOME="`${0%fortress}fortress_home`"

if [ "$1" = "run" ] ; then
    shift
    $FORTRESS_HOME/bin/run "$@"
else
    CP="`"${FORTRESS_HOME}"/bin/fortress_classpath`"

    if [ -z "$JAVA_HOME" ] ; then
      JAVACMD=java
    else
      JAVACMD="$JAVA_HOME/bin/java"
    fi

    if [ -z "$JAVA_FLAGS" ] ; then
      JAVA_FLAGS="-Xmx256m  -Xss32m"
    fi
    JAVA_FLAGS+=" -Dfile.encoding=UTF-8"
    "$JAVACMD" $JAVA_FLAGS -cp "$CP" com.sun.fortress.Shell "$@"
fi
